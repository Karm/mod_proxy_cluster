# Makefile.in for mod_proxy_cluster
# copy the source in the httpd Apache source tree
APACHE_BASE = @APACHE_BASE@
top_builddir = @APACHE_BUILDDIR@
# For .deps.
builddir = @CLUSTER_BASE@
# For the apache includes
top_srcdir = @APACHE_BASE@
# For obj list
proxy_objs=mod_proxy.lo proxy_util.lo cluster_util.lo
proxy_objs_slo=mod_proxy.slo proxy_util.slo cluster_util.slo
proxy_http_objs=mod_proxy_http.lo
proxy_http_objs_slo=mod_proxy_http.slo
proxy_ajp_objs=mod_proxy_ajp.lo ajp_header.lo ajp_link.lo ajp_msg.lo ajp_utils.lo
proxy_ajp_objs_slo=mod_proxy_ajp.slo ajp_header.slo ajp_link.slo ajp_msg.slo ajp_utils.slo

include $(top_builddir)/build/rules.mk
SH_COMPILE = $(LIBTOOL) --mode=compile $(BASE_CC) -I../include -prefer-pic -c $< && touch $@

all: mod_proxy.so mod_proxy_http.so mod_proxy_ajp.so

mod_proxy.so: mod_proxy.la
	 $(top_builddir)/build/instdso.sh SH_LIBTOOL='$(LIBTOOL)' mod_proxy.la `pwd`
mod_proxy_http.so: mod_proxy_http.la
	 $(top_builddir)/build/instdso.sh SH_LIBTOOL='$(LIBTOOL)' mod_proxy_http.la `pwd`
mod_proxy_ajp.so: mod_proxy_ajp.la
	 $(top_builddir)/build/instdso.sh SH_LIBTOOL='$(LIBTOOL)' mod_proxy_ajp.la `pwd`

mod_proxy.la: $(proxy_objs_slo)
	$(SH_LINK) -rpath $(libexecdir) -module -avoid-version $(proxy_objs)
mod_proxy_http.la: $(proxy_http_objs_slo)
	$(SH_LINK) -rpath $(libexecdir) -module -avoid-version $(proxy_http_objs)
mod_proxy_ajp.la: $(proxy_ajp_objs_slo)
	$(SH_LINK) -rpath $(libexecdir) -module -avoid-version $(proxy_ajp_objs)

clean:
	rm -f *.o *.lo *.slo *.so
	rm -rf .libs
